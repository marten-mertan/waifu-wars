(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{216:function(e,t,r){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},217:function(e,t,r){e.exports=r.p+"img/bg_1.9d9877b.jpg"},218:function(e,t,r){e.exports=r.p+"img/frame.a21cdb9.png"},219:function(e,t,r){e.exports=r.p+"img/reflection_1.6eb0803.png"},220:function(e,t,r){var content=r(228);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(21).default)("0e5ce3ea",content,!0,{sourceMap:!1})},221:function(e,t,r){var content=r(230);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(21).default)("4341637f",content,!0,{sourceMap:!1})},227:function(e,t,r){"use strict";r(220)},228:function(e,t,r){var n=r(20),o=r(216),c=r(218),l=r(219),d=n(!1),m=o(c),f=o(l);d.push([e.i,".game-card{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;width:145px;height:210px;cursor:pointer;-webkit-box-shadow:rgba(0,0,0,.333) 3px 4px 11px 3px;box-shadow:3px 4px 11px 3px rgba(0,0,0,.333)}.game-card:not(:last-child){margin-right:30px;margin-bottom:30px}.game-card:hover .game-card-inner:before{-webkit-transition:top .5s ease-in-out;transition:top .5s ease-in-out;top:-100%}.game-card-outer{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:url("+m+') no-repeat 50% 50%;background-size:contain;width:100%;height:100%}.game-card-inner,.game-card-outer{display:-webkit-box;display:-ms-flexbox;display:flex}.game-card-inner{position:relative;width:113px;height:176px;overflow:hidden}.game-card-inner:before{position:absolute;display:block;content:"";top:100%;left:0;width:100%;height:100%;background-image:url('+f+");background-size:auto 100%;background-repeat:no-repeat;z-index:10}.game-card-inner img{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}.game-card-hp{right:-10px;background:#50c878}.game-card-atk,.game-card-hp{position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;bottom:-10px;width:40px;height:40px;border-radius:50%;color:#fff}.game-card-atk{left:-10px;background:#d21f3c}.game-card.dead{opacity:.2;-webkit-transition:opacity .2s ease-in-out;transition:opacity .2s ease-in-out}",""]),e.exports=d},229:function(e,t,r){"use strict";r(221)},230:function(e,t,r){var n=r(20),o=r(216),c=r(217),l=n(!1),d=o(c);l.push([e.i,".battle{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:distribute;justify-content:space-around;min-height:100%;width:100%;background:url("+d+") repeat top}.battle-enemy,.battle-player{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}",""]),e.exports=l},244:function(e,t,r){"use strict";r.r(t);r(27),r(14),r(22),r(31),r(32);var n=r(10),o=(r(23),r(19));function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var d={components:{},props:{card:{type:Object,default:function(){return{id:0,teamId:0,name:"Default",anime:"Default",image:"/assets/images/frame.png",attack:0,currentAttack:0,defence:0,currentDefence:0,hp:0,currentHp:0,initiative:0,currentInitiative:0,statuses:[]}}}},methods:l(l({},Object(o.b)("cards",["setHint"])),{},{mouseEnter:function(){var e=this.card.name,t="<p>".concat(this.card.anime,"</p><p>hp: ").concat(this.card.hp,"</p><p>attack: ").concat(this.card.attack,"</p>");this.setHint([e,t])},mouseLeave:function(){this.setHint(["",""])}})},m=(r(227),r(9));function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var y={name:"BattlePage",components:{Card:Object(m.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"game-card",on:{mouseenter:e.mouseEnter,mouseleave:e.mouseLeave}},[r("div",{staticClass:"game-card-outer"},[r("div",{staticClass:"game-card-inner"},[r("img",{attrs:{src:e.card.image,alt:""}})])]),e._v(" "),r("div",{staticClass:"game-card-hp"},[e._v("\n        "+e._s(e.card.currentHp)+"\n    ")]),e._v(" "),r("div",{staticClass:"game-card-atk"},[e._v("\n        "+e._s(e.card.currentAttack)+"\n    ")])])}),[],!1,null,null,null).exports},computed:h({},Object(o.c)("cards",["getState"])),mounted:function(){var e=this;setTimeout((function(){var t,r;e.fetchBattleEnemyTeam(5),null!==(t=e.getState)&&void 0!==t&&null!==(r=t.playerTeam)&&void 0!==r&&r.length?e.setBattlePlayerTeam(e.getState.playerTeam):console.error("ERROR: playerTeamLength == 0"),setTimeout((function(){e.setMoveOrder([e.getState.battle.playerTeam,e.getState.battle.enemyTeam])}),1e3),setTimeout((function(){e.battle()}),1e3)}),1e3)},methods:h(h({},Object(o.b)("cards",["fetchBattleEnemyTeam","setBattlePlayerTeam","setBattleStatus","setMoveOrder","setCurrentMove","setPlayerHp","setEnemyHp","addPlayerStatus","addEnemyStatus"])),{},{battle:function(){this.getState.battle.moveOrder[this.getState.battle.currentMove%this.getState.battle.moveOrder.length].teamId>=200?this.setBattleStatus("enemyMove"):this.setBattleStatus("playerMove");var e=this.getState.battle.moveOrder[this.getState.battle.currentMove%this.getState.battle.moveOrder.length];if(console.log("Статус: "+this.getState.battle.status),console.log("Текущий ход: "+e.name),"enemyMove"===this.getState.battle.status){if(-1!==e.statuses.indexOf("dead"))console.log(e.name+" стонет от боли");else{this.setBattleStatus("enemyMove");var t=this.getState.battle.playerTeam[Math.floor(Math.random()*this.getState.battle.playerTeam.length)];console.log(e.name+" атакует "+t.name);var r=t.currentHp-e.currentAttack;this.setPlayerHp([t,r]),t.currentHp<=0&&(console.log(t.name+" падает без сознания!"),this.addPlayerStatus([t,"dead"]))}this.setCurrentMove(this.getState.battle.currentMove+1),this.battle()}else"playerMove"===this.getState.battle.status&&-1!==e.statuses.indexOf("dead")&&(console.log(e.name+" стонет от боли"),this.setCurrentMove(this.getState.battle.currentMove+1),this.battle())},playerMove:function(e){this.getState.battle.moveOrder[this.getState.battle.currentMove%this.getState.battle.moveOrder.length].teamId>=200?this.setBattleStatus("enemyMove"):this.setBattleStatus("playerMove");var t=this.getState.battle.moveOrder[this.getState.battle.currentMove%this.getState.battle.moveOrder.length];if("playerMove"===this.getState.battle.status)if(-1!==e.statuses.indexOf("dead"))console.log(e.name+" уже повержен. Незачем его добивать.");else{console.log(t.name+" атакует "+e.name);var r=e.currentHp-t.currentAttack;this.setEnemyHp([e,r]),e.currentHp<=0&&(console.log(e.name+" падает без сознания!"),this.addEnemyStatus([e,"dead"])),this.setCurrentMove(this.getState.battle.currentMove+1),this.battle()}}})},v=(r(229),Object(m.a)(y,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page battle"},[r("div",{staticClass:"battle-enemy"},e._l(e.getState.battle.enemyTeam,(function(t){return r("Card",{key:t.id,class:t.statuses,attrs:{card:t},nativeOn:{click:function(r){return e.playerMove(t)}}})})),1),e._v(" "),r("div",{staticClass:"battle-player"},e._l(e.getState.battle.playerTeam,(function(e){return r("Card",{key:e.id,class:e.statuses,attrs:{card:e}})})),1)])}),[],!1,null,null,null));t.default=v.exports}}]);